#!/bin/bash

CYAN='\033[1;36m'
RESET='\033[0m'

# Menu for the Two of Spades Card
two_of_spades_menu() {
    clear
    echo -e "${CYAN}"
    echo "      _________________________________________________________________________"
    echo "     |                              Two of Spades                              |"
    echo "     |                Deploy Post-Exploitation Frameworks (Empire)             |"
    echo "     |_________________________________________________________________________|"
    echo "     |                                                                         |"
    echo "     |  This card provides an interface to interact with Empire, a framework   |"
    echo "     |  for post-exploitation and red team operations.                         |"
    echo "     |                                                                         |"
    echo "     |                                                                         |"
    echo "     |  1. Launch Empire Framework                                             |"
    echo "     |  2. View Empire modules                                                 |"
    echo "     |  3. Check Empire documentation                                          |"
    echo "     |  4. Exit                                                                |"
    echo "     |_________________________________________________________________________|"
    echo -e "${RESET}"
    read -p "Enter your choice: " choice
    case $choice in
        1) launch_empire ;;
        2) list_modules ;;
        3) view_empire_docs ;;
        4) exit 0 ;;
        *) echo "Invalid choice. Try again."; sleep 1; two_of_spades_menu ;;
    esac
}

# Launch Empire Framework
launch_empire() {
    clear
    echo -e "${CYAN}Launching Empire Framework...${RESET}"
    if command -v empire &>/dev/null; then
        empire
    else
        echo -e "${CYAN}Error: Empire is not installed.${RESET}"
        echo "Please install Empire by following the instructions at https://github.com/BC-SECURITY/Empire."
    fi
    read -n 1 -s -r -p "Press any key to return to the menu..."
    two_of_spades_menu
}

# List Empire modules
list_modules() {
    clear
    echo -e "${CYAN}Listing Empire modules...${RESET}"
    if command -v empire &>/dev/null; then
        empire -listmodules
    else
        echo -e "${CYAN}Error: Empire is not installed.${RESET}"
        echo "Please install Empire by following the instructions at https://github.com/BC-SECURITY/Empire."
    fi
    read -n 1 -s -r -p "Press any key to return to the menu..."
    two_of_spades_menu
}

# View Empire documentation
view_empire_docs() {
    clear
    echo -e "${CYAN}Viewing Empire documentation...${RESET}"
    if command -v xdg-open &>/dev/null; then
        xdg-open "https://github.com/BC-SECURITY/Empire/wiki"
    else
        echo -e "${CYAN}Please visit: https://github.com/BC-SECURITY/Empire/wiki${RESET}"
    fi
    read -n 1 -s -r -p "Press any key to return to the menu..."
    two_of_spades_menu
}

two_of_spades_menu
