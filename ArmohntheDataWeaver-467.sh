#!/bin/bash
echo "Listing all network interfaces:"; ifconfig -a; echo "Detecting the network interface used for SSH:"; ssh_iface=$(netstat -tnpa | grep 'ESTABLISHED.*sshd' | awk '{print $5}' | cut -d: -f1 | head -n 1); echo "SSH is using interface: $ssh_iface"; set_monitor_mode() { iface=$1; echo "Setting $iface to monitor mode"; sudo ifconfig $iface down; sudo iwconfig $iface mode monitor; sudo ifconfig $iface up; echo "$iface is now in monitor mode"; }; for iface in $(ifconfig -a | grep -o '^[a-z0-9]\+'); do if [ "$iface" != "$ssh_iface" ] && iwconfig $iface | grep -q 'IEEE 802.11'; then echo "Checking interface: $iface"; mode=$(iwconfig $iface | grep 'Mode' | awk '{print $1}' | cut -d: -f2); echo "$iface is currently in $mode mode"; if [ "$mode" != "Monitor" ]; then set_monitor_mode $iface; else echo "$iface is already in monitor mode"; fi; else echo "Skipping SSH interface or non-wireless interface: $iface"; fi; done; echo "Running airodump-ng on all interfaces in monitor mode"; for iface in $(ifconfig -a | grep -o '^[a-z0-9]\+'); do if iwconfig $iface | grep -q 'Mode:Monitor'; then echo "Starting airodump-ng on $iface"; sudo airodump-ng $iface; fi; done
