bash -c 'g="\033[1;32m";n="\033[0m";f=();s="";c=();sc(){ f=();for d in /bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/sbin /opt/bin /opt/sbin;do for m in apt pacman dnf yum apk opkg xbps-install;do [ -x "$d/$m" ]||continue;case "$m" in apt)t=/var/lib/dpkg/status;;pacman)t=/var/lib/pacman/local;;dnf|yum)t=/var/cache/dnf;;apk)t=/lib/apk/db/installed;;opkg)t=/usr/lib/opkg/status;;xbps-install)t=/var/db/xbps;;esac;[ -e "$t" ]&&f+=("$m");done;done;};cm(){ o="";for p in "${c[@]}";do case "$s" in apt)o+="apt install -y $p &&";;pacman)o+="pacman -Sy --noconfirm $p &&";;dnf)o+="dnf install -y $p &&";;yum)o+="yum install -y $p &&";;apk)o+="apk add $p &&";;opkg)o+="opkg install $p &&";;xbps-install)o+="xbps-install -y $p &&";;*)o+="echo unsupported &&";;esac;done;echo "${o% &&}";};sc;while true;do clear;echo -e "${g}PACKAGE MANAGER CHECKER${n}";echo -n "Detected: ";[ ${#f[@]} -eq 0 ]&&echo None||echo "${f[*]}";echo "Selected: ${s:-none}";echo -n "Packages:";[ ${#c[@]} -eq 0 ]&&echo none||echo "${c[*]}";echo -n "Preview: ";[ "$s" ]&&cm||echo "(incomplete)";echo;echo "[1] Rescan [2] Select [3] Add [4] Install [5] Reset [q] Quit";read -p "Choice: " a;if [ "$a" = "1" ];then sc;read -p "OK";elif [ "$a" = "2" ];then [ ${#f[@]} -eq 0 ]&&echo "None."&&read&&continue;for i in "${!f[@]}";do echo "[$((i+1))] ${f[$i]}";done;read -p "#" m;s="${f[$((m-1))]}";read -p "OK";elif [ "$a" = "3" ];then l="curl grep awk sed wget bash coreutils tar gzip unzip";IFS=" " read -r -a a<<<"$l";for i in "${!a[@]}";do echo "[$((i+1))] ${a[$i]}";done;read -p "Add: " x;for n in $x;do p="${a[$((n-1))]}";[[ " ${c[*]} " =~ " $p " ]]||c+=("$p");done;read -p "OK";elif [ "$a" = "4" ];then [ "$s" ]&&[ ${#c[@]} -gt 0 ]&&echo "Run:"&&cm&&read -p go&&eval "$(cm)"&&read -p done||echo "Missing."&&read;elif [ "$a" = "5" ];then s="";c=();read -p "Cleared";elif [ "$a" = "q" ];then clear;break;fi;done'
