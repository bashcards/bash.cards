bash -c 'g="\033[1;32m"; n="\033[0m"; found=(); selected=""; chosen=(); scan(){ found=(); i=1; for d in /bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/sbin /opt/bin /opt/sbin; do for c in apt pacman dnf yum apk opkg xbps-install; do [ -x "$d/$c" ] || continue; case "$c" in apt) f=/var/lib/dpkg/status;; pacman) f=/var/lib/pacman/local;; dnf|yum) f=/var/cache/dnf;; apk) f=/lib/apk/db/installed;; opkg) f=/usr/lib/opkg/status;; xbps-install) f=/var/db/xbps;; esac; [ -e "$f" ] && found+=("$c"); done; done; }; cmdline(){ full=""; for p in "${chosen[@]}"; do case "$selected" in apt) full+="apt install -y $p && ";; pacman) full+="pacman -Sy --noconfirm $p && ";; dnf) full+="dnf install -y $p && ";; yum) full+="yum install -y $p && ";; apk) full+="apk add $p && ";; opkg) full+="opkg install $p && ";; xbps-install) full+="xbps-install -y $p && ";; *) full+="echo Unsupported && ";; esac; done; echo "${full% && }"; }; scan; while true; do clear; printf "${g}+-----------------------------+\n|   PACKAGE MANAGER CHECKER   |\n+-----------------------------+${n}\n"; echo -n "Detected: "; [ ${#found[@]} -eq 0 ] && echo "None" || echo "${found[*]}"; echo "Selected Manager: ${selected:-none}"; echo -n "Chosen Packages:"; [ ${#chosen[@]} -eq 0 ] && echo " none" || echo " ${chosen[*]}"; echo -n "Command Preview: "; [ "$selected" ] && cmdline || echo "(incomplete)"; echo; echo "[1] Rescan managers"; echo "[2] Choose one to use"; echo "[3] Pick packages to install"; echo "[4] Install"; echo "[5] Reset selections"; echo "[q] Quit"; printf "Choice: "; read a; if [ "$a" = "1" ]; then scan; read -p "Press enter..."; elif [ "$a" = "2" ]; then [ ${#found[@]} -eq 0 ] && echo "No working managers." && read && continue; for i in "${!found[@]}"; do echo "[$((i+1))] ${found[$i]}"; done; printf "Select manager #: "; read m; selected="${found[$((m-1))]}"; read -p "Press enter..."; elif [ "$a" = "3" ]; then list="curl grep awk sed wget bash coreutils tar gzip unzip"; IFS=" " read -r -a allpkgs <<< "$list"; for i in "${!allpkgs[@]}"; do echo "[$((i+1))] ${allpkgs[$i]}"; done; printf "Select packages (e.g. 1 3 5): "; read nums; for n in $nums; do p="${allpkgs[$((n-1))]}"; [[ " ${chosen[*]} " =~ " $p " ]] || chosen+=("$p"); done; read -p "Press enter..."; elif [ "$a" = "4" ]; then [ -z "$selected" ] || [ ${#chosen[@]} -eq 0 ] && echo "Missing selection or packages." && read && continue; echo "Running:"; cmdline; read -p "Press enter to execute..."; eval "$(cmdline)"; read -p "Done. Press enter..."; elif [ "$a" = "5" ]; then selected=""; chosen=(); echo "Selections cleared."; read -p "Press enter..."; elif [ "$a" = "q" ]; then clear; break; fi; done'
