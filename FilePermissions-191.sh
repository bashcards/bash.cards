#!/bin/bash
E='\x1b[38;5;46m';R='\033[0m';w(){ [[ -n "$1" ]]&&echo "$1"|fold -s -w 60;};b(){ a=("$@");printf "${E}+";printf -- '-%.0s' $(seq 1 60);printf "+${R}\n";for l in "${a[@]}";do w "$l"|while IFS= read -r x;do printf "${E}|${R} %-58s ${E}|${R}\n" "$x";done;done;printf "${E}+";printf -- '-%.0s' $(seq 1 60);printf "+${R}\n";};pause(){ echo;read -n1 -s -r -p "SCAN TO CONTINUE...";};select_file(){ clear;b "SELECT TARGET FILE FOR PERMISSION CONTROL";mapfile -t files < <(find . -maxdepth 1 -type f);for i in "${!files[@]}";do printf "${E}|${R} %2s - %-53s ${E}|${R}\n" "$((i+1))" "${files[$i]}";done;printf "${E}+";printf -- '-%.0s' $(seq 1 60);printf "+${R}\n";read -p "SCAN FILE #: " i;target="${files[$((i-1))]}";};show_status(){ clear;[ -n "$target" ]&&b "FILE STATUS: $target" "Permissions, Ownership, Size, Last Modified" "Use MODIFY to simulate real admin file handling scenarios." "$(stat -c '%A %U %G %s bytes %y' "$target")";pause;};mod_menu(){ while true;do clear;b "MODIFY MODULE: PERMISSION CODES FOR $target" "chmod = change file mode bits | chown = change owner" "" "A = Add Execute for Owner (chmod u+x)" "B = Remove Write from Group (chmod g-w)" "C = Add Read for Others (chmod o+r)" "D = Set to Read/Write Default (chmod 644)" "E = Change Owner to Root (chown root)" "X = Return to Main Menu";read -p "SCAN: " o;case "${o^^}" in A)chmod u+x "$target";;B)chmod g-w "$target";;C)chmod o+r "$target";;D)chmod 644 "$target";;E)sudo chown root "$target";;X)break;;*)b "INVALID CODE";pause;;esac;show_status;done;};while true;do clear;b "BAAASH SYSTEMS INTERFACE 41386 - 4 OF SPADES" "MISSION: FILE PERMISSIONS" "CONTEXT: chmod (change access), chown (change owner), and permission bits (rwx)" "MODE: SCANNER ONLY - NO KEYBOARD ENTRY";b "SCAN MENU OPTIONS" "A = Select File" "B = View File Permission Status" "C = Modify File Permissions" "Q = Exit Training Module";read -p "SCAN: " x;case "${x^^}" in A)select_file;;B)show_status;;C)mod_menu;;Q)clear;b "MODULE EXITED — 4♠ COMPLETE";break;;*)b "INVALID SCAN CODE";pause;;esac;done
