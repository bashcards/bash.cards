#!/usr/bin/env bash
C=$'\033[1;36m';R=$'\033[1;33m';rule(){ printf "$C+%s+$R\n" "$(printf '%*s' 30 ''|tr ' ' '-')";};line(){ printf "$C| %-28s |$R\n" "$1";};menu(){ clear;rule;line "Manage Command Aliases";rule;line "1 = View all current aliases";line "2 = Create a new alias";line "3 = Remove an alias";line "4 = Export aliases to a file";line "5 = Load aliases from a file";line "6 = Search for an alias";line "7 = Test an alias";line "8 = Reset all aliases";line "9 = Exit";rule;read -p "SCAN CODE: " x;case $x in 1)view_aliases;;2)create_alias;;3)remove_alias;;4)export_aliases;;5)load_aliases;;6)search_alias;;7)test_alias;;8)reset_aliases;;9)clear;exit 0;;*)echo INVALID;sleep 1;menu;;esac;};view_aliases(){ clear;rule;line "Current Aliases:";rule;alias;read -n1 -s -r -p "Press any key...";menu;};create_alias(){ clear;read -p "Alias name: " n;read -p "Command: " d;alias "$n=$d";echo "Alias $n -> $d";read -n1 -s -r -p "Press any key...";menu;};remove_alias(){ clear;alias|awk -F= '{printf "%d) %s\n",NR,$1}';read -p "Alias to remove: " n;unalias "$n";echo "Removed $n";read -n1 -s -r -p "Press any key...";menu;};export_aliases(){ clear;read -p "Filename: " f;alias >"$f";echo "Exported to $f";read -n1 -s -r -p "Press any key...";menu;};load_aliases(){ clear;read -p "Filename: " f;[[ -f $f ]]&&. "$f"&&echo "Loaded $f"||echo "Not found";read -n1 -s -r -p "Press any key...";menu;};search_alias(){ clear;read -p "Search: " q;alias|grep --color=always -F "$q"||echo None;read -n1 -s -r -p "Press any key...";menu;};test_alias(){ clear;read -p "Alias to test: " n;cmd=$(alias "$n" 2>/dev/null|sed -E "s/^alias $n='(.*)'\$/\1/");[[ -n $cmd ]]&&{ echo "Running: $cmd";eval "$cmd";}||echo "Not found";read -n1 -s -r -p "Press any key...";menu;};reset_aliases(){ clear;read -p "Remove all aliases? (y/n): " y;[[ $y == y ]]&&unalias -a&&echo "All reset"||echo Cancelled;read -n1 -s -r -p "Press any key...";menu;};menu
